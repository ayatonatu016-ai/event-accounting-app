<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>カメラ起動テスト</title>
<style>
body { font-family: sans-serif; text-align: center; padding: 20px; }
button { padding: 15px 25px; font-size: 1.2em; margin: 20px; border-radius: 10px; cursor: pointer; background-color: #28a745; color: white; border: none; }
#scan-region { width: 100%; max-width: 400px; height: 300px; margin: 0 auto; border: 3px solid #007bff; border-radius: 10px; }
</style>
</head>
<body>

<h1>カメラ起動テスト</h1>
<button id="startCameraBtn">カメラを起動</button>
<div id="scan-region"></div>

<script src="https://unpkg.com/html5-qrcode@2.3.7/minified/html5-qrcode.min.js"></script>
<script>
document.getElementById("startCameraBtn").addEventListener("click", function() {
    const qrCodeRegionId = "scan-region";
    const html5QrCode = new Html5Qrcode(qrCodeRegionId);

    Html5Qrcode.getCameras().then(cameras => {
        if(cameras && cameras.length){
            html5QrCode.start(
                { facingMode: "environment" },
                { fps:10, qrbox:250 },
                decodedText => console.log("読み取り: ", decodedText),
                error => console.log("エラー: ", error)
            );
        } else {
            alert("カメラが見つかりません");
        }
    }).catch(err => alert("カメラ起動エラー: " + err));
});
</script>

</body>
</html>
